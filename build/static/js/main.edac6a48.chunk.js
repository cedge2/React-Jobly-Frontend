(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{143:function(e,a,t){e.exports=t(303)},148:function(e,a,t){},149:function(e,a,t){},157:function(e,a,t){},158:function(e,a,t){},159:function(e,a,t){},160:function(e,a,t){},161:function(e,a,t){},178:function(e,a,t){},179:function(e,a,t){},180:function(e,a,t){},181:function(e,a,t){},182:function(e,a,t){},188:function(e,a){},190:function(e,a){},204:function(e,a){},206:function(e,a){},234:function(e,a){},236:function(e,a){},237:function(e,a){},242:function(e,a){},244:function(e,a){},250:function(e,a){},252:function(e,a){},271:function(e,a){},283:function(e,a){},286:function(e,a){},303:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(138),s=t.n(r),c=(t(148),t(7));var m=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const t=localStorage.getItem(e)||a,[l,r]=Object(n.useState)(t);return Object(n.useEffect)((function(){null===l?localStorage.removeItem(e):localStorage.setItem(e,l)}),[e,l]),[l,r]},o=(t(149),t(305));var i=l.a.createContext();var u=function(e){let{logout:a}=e;const{currentUser:t}=Object(n.useContext)(i);function r(){return l.a.createElement("ul",{className:"navbar-nav"},l.a.createElement("li",{className:"nav-item"},l.a.createElement(c.c,{className:"nav-link",to:"/companies"},"Companies")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(c.c,{className:"nav-link",to:"/jobs"},"Jobs")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(c.c,{className:"nav-link",to:"/profile"},"Profile")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(c.b,{className:"nav-link",to:"/",onClick:a},"Log out ",t.first_name||t.username)))}function s(){return l.a.createElement("ul",{className:"navbar-nav"},l.a.createElement("li",{className:"nav-item"},l.a.createElement(c.c,{className:"nav-link",exact:!0,to:"/login"},"Login")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(c.c,{className:"nav-link",exact:!0,to:"/signup"},"Sign Up")))}return l.a.createElement(o.a,{className:"navBar navbar-expand-md"},l.a.createElement(c.c,{className:"navbar-brand",exact:!0,to:"/"},"Jobly"),t?l.a.createElement(r,null):l.a.createElement(s,null))},p=t(6);t(157),t(158);var d=function(){const{currentUser:e}=Object(n.useContext)(i);return l.a.createElement("div",{className:"Homepage"},l.a.createElement("div",{className:"container text-center"},l.a.createElement("h1",{className:"title"},"Jobly"),l.a.createElement("p",{className:"header"},"All the jobs in one, convenient place!"),e?l.a.createElement("h2",{className:"welcome-back-msg"},"Welcome Back ",e.firstName||e.username,"!"):l.a.createElement("p",{className:"HomePage-buttons"},l.a.createElement(c.b,{className:"HomePage-btn btn-primary font-weight-bold mr-3",to:"/login"},"Log in"),l.a.createElement(c.b,{className:"HomePage-btn btn-primary font-weight-bold",to:"/signup"},"Sign up"))))};var E=function(e){let{type:a="danger",messages:t=[]}=e;return l.a.createElement("div",{className:"alert alert-".concat(a),role:"alert"},t.map(e=>l.a.createElement("p",{className:"alert-msg",key:e},e)))};t(159);var f=function(e){let{login:a}=e;const[t,r]=Object(n.useState)({username:"",password:""}),[s,c]=Object(n.useState)([]),{username:m,password:o}=t,i=Object(p.g)(),u=e=>{const{name:a,value:t}=e.target;r(e=>({...e,[a]:t}))};return l.a.createElement("div",{className:"LoginForm"},l.a.createElement("h1",{className:"login-header"},"Please Login"),l.a.createElement("form",{onSubmit:async function(e){e.preventDefault();let n=await a(t);n.success?i.push("/"):c(n.errors)}},l.a.createElement("div",null,l.a.createElement("label",{className:"label",htmlFor:"username"},"Username"),l.a.createElement("input",{id:"username",type:"text",name:"username",value:m,onChange:u,style:{width:"275px"}})),l.a.createElement("div",null,l.a.createElement("label",{className:"label",htmlFor:"password"},"Password"),l.a.createElement("input",{id:"password",type:"password",name:"password",value:o,onChange:u,style:{width:"275px"}})),s.length?l.a.createElement(E,{type:"danger",messages:s}):null,l.a.createElement("button",{className:"Login-btn"},"Submit")))};t(160);var h=function(e){let{signup:a}=e;const[t,r]=Object(n.useState)({username:"",password:"",firstName:"",lastName:"",email:""}),[s,c]=Object(n.useState)([]),{username:m,password:o,firstName:i,lastName:u,email:d}=t,f=Object(p.g)(),h=e=>{const{name:a,value:t}=e.target;r(e=>({...e,[a]:t}))};return l.a.createElement("div",{className:"SignupForm"},l.a.createElement("h1",{className:"signup-header"}," Sign Up"),l.a.createElement("form",{onSubmit:async function(e){e.preventDefault();let n=await a(t);n.success?f.push("/"):c(n.errors)}},l.a.createElement("div",null,l.a.createElement("label",{className:"label",htmlFor:"username"},"Username"),l.a.createElement("input",{id:"username",type:"text",name:"username",value:m,onChange:h,style:{width:"275px"}})),l.a.createElement("div",null,l.a.createElement("label",{className:"label",htmlFor:"password"},"Password"),l.a.createElement("input",{id:"password",type:"password",name:"password",value:o,onChange:h,style:{width:"275px"}})),l.a.createElement("div",null,l.a.createElement("label",{className:"label",htmlFor:"firstName"},"First Name"),l.a.createElement("input",{id:"firstName",type:"text",name:"firstName",value:i,onChange:h,style:{width:"275px"}})),l.a.createElement("div",null,l.a.createElement("label",{className:"label",htmlFor:"lastName"},"Last Name"),l.a.createElement("input",{id:"lastName",type:"text",name:"lastName",value:u,onChange:h,style:{width:"275px"}})),l.a.createElement("div",null,l.a.createElement("label",{className:"label",htmlFor:"email"},"Email"),l.a.createElement("input",{id:"email",type:"email",name:"email",value:d,onChange:h,style:{width:"275px"}})),s.length?l.a.createElement(E,{type:"danger",messages:s}):null,l.a.createElement("button",{className:"signup-btn"},"Submit")))};t(161);var b=function(e){let{search:a}=e;const[t,r]=Object(n.useState)(""),{searchTerm:s}=t;return l.a.createElement("div",null,l.a.createElement("form",{className:"form-inline",onSubmit:function(e){e.preventDefault(),a(t.trim()||void 0),r(t.trim())}},l.a.createElement("input",{className:"form-control",type:"text",name:"searchTerm",value:s,onChange:function(e){const{value:a}=e.target;r(a)},placeholder:"Enter Search Term ..."}),l.a.createElement("button",{type:"submit",className:"btn btn-lg btn-primary"},"Submit")))},g=t(141),v=t.n(g);class N{static async request(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"get";console.debug("API Call:",e,a,t);const n="".concat("https://reactjobly-fknu.onrender.com","/").concat(e),l={Authorization:"Bearer ".concat(N.token)},r="get"===t?a:{};try{return(await v()({url:n,method:t,data:a,params:r,headers:l})).data}catch(s){console.error("API Error:",s.response);let e=s.response.data.error.message;throw Array.isArray(e)?e:[e]}}static async getCurrentUser(e){return(await this.request("users/".concat(e))).user}static async getCompanies(e){return(await this.request("companies",{name:e})).companies}static async getCompany(e){return(await this.request("companies/".concat(e))).company}static async getJobs(e){return(await this.request("jobs",{title:e})).jobs}static async applyToJob(e,a){await this.request("users/".concat(e,"/jobs/").concat(a),{},"post")}static async signup(e){return(await this.request("auth/register",e,"post")).token}static async login(e){return(await this.request("auth/token",e,"post")).token}static async saveProfile(e,a){return(await this.request("users/".concat(e),a,"patch")).user}}var y=N;t(178);var w=function(e){let{handle:a,name:t,description:n,logoUrl:r}=e;return l.a.createElement(c.b,{className:"CompanyCard-link",to:"/companies/".concat(a)},l.a.createElement("div",{className:"card"},l.a.createElement("h4",{className:"card-name"},t),l.a.createElement("h5",{className:"description"},n),l.a.createElement("h5",{className:"logo"},r&&l.a.createElement("img",{src:r,alt:t,className:"float-right ml-5"}))))};t(179),t(180);var j=function(){return l.a.createElement("div",{className:"LoadingSpinner"},"Loading ...")};var x=function(){const[e,a]=Object(n.useState)([]);async function t(e){let t=await y.getCompanies(e);a(t)}return Object(n.useEffect)((function(){t()}),[]),e?l.a.createElement("div",{className:"CompanyList col-md-8 offset-md-2"},l.a.createElement(b,{search:t}),e.length?l.a.createElement("div",{className:"CompanyList-list"},e.map(e=>l.a.createElement(w,{key:e.handle,handle:e.handle,name:e.name,description:e.description,logoUrl:e.logoUrl}))):l.a.createElement("p",{className:"lead"},"Sorry, no results were found!")):l.a.createElement(j,null)};t(181);var S=function(e){let{id:a,title:t,salary:r,equity:s,companyName:c}=e;const{hasAppliedToJob:m,applyToJob:o}=Object(n.useContext)(i),[u,p]=Object(n.useState)();return Object(n.useEffect)((function(){p(m(a))}),[a,m]),l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"container"},l.a.createElement("h4",{className:"card-title"},t),l.a.createElement("p",{className:"company-name"}," ",c),r&&l.a.createElement("div",null,l.a.createElement("small",null,"Salary: ",function(e){const a=e.toString();let t="";for(let s=a.length-1;s>=0;s--)t+=a.charAt(s);let n="",l=[];for(let s=0;s<t.length;s+=3){let e=t.substring(s,3+s);3===e.length?n=n.concat(e,","):(3===e.length&&t.length<=3||3!==e.length)&&(n=n.concat(e))}let r=n.split("");if(l=r.reverse(),","===l[0]){return l.shift(),l.join("")}return l.join("")}(r))),void 0!==s&&l.a.createElement("div",null,l.a.createElement("small",null,"Equity: ",s)),l.a.createElement("button",{className:"apply-btn",onClick:async function(e){m(a)||(o(a),p(!0))},disabled:u},u?"APPLIED":"APPLY")))};var C=function(e){let{jobs:a,apply:t}=e;return l.a.createElement("div",{className:"JobCardList"},a.map(e=>l.a.createElement(S,{key:e.id,id:e.id,title:e.title,salary:e.salary,equity:e.equity,companyName:e.companyName})))};var O=function(){const{handle:e}=Object(p.h)(),[a,t]=Object(n.useState)({name:"",description:"",handle:"",jobs:[]});return Object(n.useEffect)((function(){!async function(){let a=await y.getCompany(e);t(a)}()}),[e]),a?l.a.createElement("div",{className:"CompanyDetail col-md-8 offset-md-2"},l.a.createElement("h2",null,a.name),l.a.createElement("p",null,a.description),l.a.createElement(C,{jobs:a.jobs})):l.a.createElement(j,null)};var k=function(){const[e,a]=Object(n.useState)(null);async function t(e){let t=await y.getJobs(e);a(t)}return Object(n.useEffect)((function(){t()}),[]),e?l.a.createElement("div",{className:"JobList col-md-8 offset-md-2"},l.a.createElement(b,{search:t}),e.length?l.a.createElement(C,{jobs:e}):l.a.createElement("p",{className:"error-msg"},"Sorry, no results were found!")):l.a.createElement(j,null)};t(182);var P=function(){const{currentUser:e,setCurrentUser:a}=Object(n.useContext)(i),[t,r]=Object(n.useState)({username:e.username,firstName:e.firstName,lastName:e.lastName,email:e.email,password:""}),[s,c]=Object(n.useState)([]),[m,o]=Object(n.useState)(!1),u=e=>{const{name:a,value:t}=e.target;r(e=>({...e,[a]:t})),c([])};return l.a.createElement("div",{className:"ProfileForm"},l.a.createElement("h1",null," Profile"),l.a.createElement("form",{onSubmit:async function(e){e.preventDefault();let n,l={firstName:t.firstName,lastName:t.lastName,email:t.email,password:t.password},s=t.username;try{n=await y.saveProfile(s,l)}catch(m){return void c(m)}r(e=>({...e,password:""})),c([]),o(!0),a(n)}},l.a.createElement("div",null,l.a.createElement("label",{className:"label",htmlFor:"username"},"Username"),l.a.createElement("input",{id:"username",type:"text",name:"username",value:t.username,onChange:u,style:{width:"275px"}})),l.a.createElement("div",null,l.a.createElement("label",{className:"label",htmlFor:"firstName"},"First Name"),l.a.createElement("input",{id:"firstName",type:"text",name:"firstName",value:t.firstName,onChange:u,style:{width:"275px"}})),l.a.createElement("div",null,l.a.createElement("label",{className:"label",htmlFor:"lastName"},"Last Name"),l.a.createElement("input",{id:"lastName",type:"text",name:"lastName",value:t.lastName,onChange:u,style:{width:"275px"}})),l.a.createElement("div",null,l.a.createElement("label",{className:"label",htmlFor:"email"},"Email"),l.a.createElement("input",{id:"email",type:"email",name:"email",value:t.email,onChange:u,style:{width:"275px"}})),l.a.createElement("div",null,l.a.createElement("label",{className:"label",htmlFor:"password"},"Password"),l.a.createElement("input",{id:"password",type:"password",name:"password",value:t.password,onChange:u,style:{width:"275px"}})),s.length?l.a.createElement(E,{type:"danger",messages:s}):null,m?l.a.createElement(E,{type:"success",messages:["Updated successfully!"]}):null,l.a.createElement("button",{className:"profile-btn"},"Save Changes")))};var U=function(e){let{exact:a,path:t,children:r}=e;const{currentUser:s}=Object(n.useContext)(i);return console.debug("PrivateRoute","exact=",a,"path=",t,"currentUser=",s),s?l.a.createElement(p.b,{exact:a,path:t},r):l.a.createElement(p.a,{to:"/login"})};var F=function(e){let{signup:a,login:t}=e;return l.a.createElement("div",{className:"Routes"},l.a.createElement(p.d,null,l.a.createElement(p.b,{exact:!0,path:"/"},l.a.createElement(d,null)),l.a.createElement(p.b,{exact:!0,path:"/signup"},l.a.createElement(h,{signup:a})),l.a.createElement(p.b,{exact:!0,path:"/login"},l.a.createElement(f,{login:t})),l.a.createElement(U,{exact:!0,path:"/companies"},l.a.createElement(x,null)),l.a.createElement(U,{path:"/companies/:handle"},l.a.createElement(O,null)),l.a.createElement(U,{exact:!0,path:"/jobs"},l.a.createElement(k,null)),l.a.createElement(U,{exact:!0,path:"/profile"},l.a.createElement(P,null)),l.a.createElement(p.b,null,l.a.createElement("div",null,l.a.createElement("p",{className:"errorHandler1"},"This page cannot be found..."),l.a.createElement("p",{className:"errorHandler2"},"Please click one of the links to redirect.")))))},L=t(142),J=t.n(L);var q=function(){const[e,a]=Object(n.useState)(!1),[t,r]=Object(n.useState)(new Set([])),[s,o]=Object(n.useState)(null),[p,d]=m("jobly-token");function E(e){return t.has(e)}return Object(n.useEffect)((function(){a(!1),async function(){if(p)try{let{username:e}=J.a.decode(p);y.token=p;let a=await y.getCurrentUser(e);o(a)}catch(e){console.error("App loadUserInfo: problem loading",e),o(null)}a(!0)}()}),[p]),e?l.a.createElement(c.a,null,l.a.createElement(i.Provider,{value:{currentUser:s,setCurrentUser:o,hasAppliedToJob:E,applyToJob:function(e){E(e)||(y.applyToJob(s.username,e),r(new Set([...t,e])))}}},l.a.createElement("div",{className:"App"},l.a.createElement(u,{logout:function(){o(null),d(null)}}),l.a.createElement(F,{login:async function(e){try{let a=await y.login(e);return d(a),{success:!0}}catch(a){return console.error("login failed",a),{success:!1,errors:a}}},signup:async function(e){try{let a=await y.signup(e);return d(a),{success:!0}}catch(a){return console.error("signup failed",a),{success:!1,errors:a}}}})))):l.a.createElement(j,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[143,1,2]]]);
//# sourceMappingURL=main.edac6a48.chunk.js.map